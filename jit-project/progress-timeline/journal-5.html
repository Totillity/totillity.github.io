<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Book</title>
    
        <link rel='stylesheet' href='../../style.css'>
    
</head>
<body>
    <input type="checkbox" class="nav-bar-side-checkbox" id="nav-bar-side-button">
    <div class="nav-bar-side">
        <div class="nav-bar">
            <div id="nav-title-container">
                <img src="/Logo.svg" id="nav-img" alt="Pretty logo">
            </div>

            <div class="nav-list">
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/index.html">Contents</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        
                            <input type="checkbox" class="nav-checkbox" id="nav-checkbox-1-2" checked="checked">
                        
                        <div class="nav-bar-dropdown-container">
                            <label class="nav-label" for="nav-checkbox-1-2">
                                <span class="nav-dropdown-label-span">
                                    JIT Project
                                </span>
                            </label>
                            <div class="nav-dropdown-content">
                                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/about.html">About</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        
                            <input type="checkbox" class="nav-checkbox" id="nav-checkbox-2-2" checked="checked">
                        
                        <div class="nav-bar-dropdown-container">
                            <label class="nav-label" for="nav-checkbox-2-2">
                                <span class="nav-dropdown-label-span">
                                    Progress Timeline
                                </span>
                            </label>
                            <div class="nav-dropdown-content">
                                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/timeline.html">Timeline</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-1-3.html">Weeks 1 to 3</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-1.html">Journal 1</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-4-7.html">Weeks 4 to 7</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-2.html">Journal 2</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-8-13.html">Weeks 8 to 13</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-3.html">Journal 3</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-14-15.html">Weeks 14 to 15</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-4.html">Journal 4</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-16-19.html">Weeks 16 to 19</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-5.html">Journal 5</a>
                    
                    </div>
                
                            </div>
                        </div>
                    
                    </div>
                
                            </div>
                        </div>
                    
                    </div>
                
            </div>
        </div>
        <label class="nav-bar-side-label" for="nav-bar-side-button">
            <span class="nav-bar-side-label-span"></span>
        </label>
    </div>
    <div class="content-container">
        <div class="content">
            <div class="content-title"><header>Journal 5: Weeks 16-19</header></div><hr><div class="content-paragraph"><p>March 21, 2021 - April 17, 2021</p></div><div class="content-heading">Goals for this Journal:</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement Objects</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement Attribute Access and 'Setting'</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Research and Implement optimizations which can be done with Types</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement Nan-Boxing</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement Dynamic Type Checks</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement some of those researched optimizations</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement some form of Python Transpilation</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Ensure Python Compatibility</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>For further research, research what would be needed for JS or Lua transpilation</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Continue working on type-based optimizations</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Create and Run some tests</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Implement a Command Line Interface</p></div></li></ol><div class="content-heading">Research</div><div class="content-paragraph"><p>
<b>Note: all references labelled at the bottom.</b>
<b>Note: I used code snippets instead of screenshots because this is a programming project.</b>
<b>Note: I used pseudocode instead of actual C for the sake of clarity.</b></p></div><div class="content-paragraph"><p>The first two weeks of this time period were spent on making this JIT functional for everyday use. The most important step on that
journey is implementing objects, since a means of permanent, structured data storage is critical in programming. Although
the JIT could have technically made any calculation before, objects make it practical for everyday use.</p></div><div class="content-paragraph"><p>This step requires an explanation of what exactly I mean by objects, though. In the strictest sense, objects are packets of
data which have a defined set of operations you can do on that data. Typically, this involves concepts such as methods, which
are functions which take the object as their first parameter implicitly. This is the model languages such as JavaScript and
Smalltalk (which essentially invented objects) follow. There are slightly more structured, if less powerful, models you can follow. 
Languages such as Java are near the extreme end of this, where objects must also be an instance of a class, which define exactly what
methods a given object can have, as opposed to Javascript where you can just add any old function to an object. Python strikes
a middle ground, where objects are created by classes and thus have a default set of methods, but where you can also extend
those objects with new methods and data at any time.</p></div><div class="content-paragraph"><p>The objects I have implemented for ojit are even looser than in JavaScript. My objects are essentially just dictionaries/maps
which map names to objects. A function can be assigned to a name and be called that way like in the example: 
</p></div><div class="content-code"><pre>
def fibo(n) {
    if (n < 2) {
        return n;
    } else {
        return fibo(n-1) + fibo(n-2);
    }
}

def main() {
    let holder = {};  // creates a new, empty object and assigns it to the variable `holder`
    holder.func = fibo;  // now, whenever we access holder.func, it gives us a reference to fibo
    return holder.func(20)  // returns 6765, the 20th fibonacci number
}
</pre></div><div class="content-paragraph"><p>
This behavior, however, doesn't implicitly pass the object as an argument to `fibo`. To have that behavior, you must instead use
the method call syntax, which uses a colon instead of a period for the attribute access:
</p></div><div class="content-code"><pre>
def make_fraction(numerator, denominator) {
    let fraction = {};
    fraction.numerator = numerator;
    fraction.denominator = denominator;

    fraction.square_fraction = square_fraction;  // The important line
    return fraction;
}

def square_fraction(frac) {
    frac.numerator = frac.numerator * frac.numerator;
    frac.denominator = frac.denominator * frac.denominator;
}

def main() {
    let frac = make_fraction(2, 3);

    // this colon means the same thing as '.', except you also pass `frac` to the function as the first argument
    frac:square_fraction();
    return frac.numerator;  // returns 4
}
</pre></div><div class="content-paragraph"><p>
This is a much more general system than JavaScript's system and can therefore do anything JavaScript can do. The usage of
that will be clear when we get to transpilation.</p></div><div class="content-paragraph"><p>Implementing objects was fairly straightforward. As I've mentioned before, underneath the hood, they are just dictionaries,
which I had already implemented earlier in order to support variables.
</p></div><div class="content-heading">Main Accomplishments</div><ol class="content-ordered-list"></ol><div class="content-heading">Reflection</div><div class="content-paragraph"><p></p></div><div class="content-paragraph"><p></p></div><div class="content-heading">Sources:</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-instruction-set-reference-manual-325383.pdf">x64 Instruction Reference</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://pyokagan.name/blog/2019-09-20-x86encoding/">Reference on x64 encoding #1</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://ref.x86asm.net/geek64.html">Reference on x64 encoding #2</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://wiki.osdev.org/X86-64_Instruction_Encoding">Reference on x64 encoding #3</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>('<a href="Reference on LLVMLite">Reference on LLVMLite</a>', 'https://llvmlite.readthedocs.io/en/latest/user-guide/ir/index.html')</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>('<a href="Ternary Operator in JavaScript, and similar in C, Java C#, etc.">Ternary Operator in JavaScript, and similar in C, Java C#, etc.</a>', 'https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator')</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>('<a href="Ternary Operator in Python">Ternary Operator in Python</a>', 'https://docs.python.org/3/reference/expressions.html?highlight=ternary#conditional-expressions')</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://en.wikipedia.org/wiki/Static_single_assignment_form#Computing_minimal_SSA_using_dominance_frontiers">Dominance Frontiers</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://teaching.idallen.com/dat2343/10f/notes/040_overflow.txt">Explanation of Overflow vs Carry Flag</a></p></div></li></ol><div class="content-end"></div>
        </div>
    </div>
    <div class="right-content"></div>
</body>
</html>
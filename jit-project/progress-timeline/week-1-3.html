<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Book</title>
    
        <link rel='stylesheet' href='../../style.css'>
    
</head>
<body>
    <input type="checkbox" class="nav-bar-side-checkbox" id="nav-bar-side-button">
    <div class="nav-bar-side">
        <div class="nav-bar">
            <div id="nav-title-container">
                <img src="/_site/Logo.svg" id="nav-img" alt="Pretty logo">
            </div>

            <div class="nav-list">
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/index.html">Contents</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        
                            <input type="checkbox" class="nav-checkbox" id="nav-checkbox-1-2" checked="checked">
                        
                        <div class="nav-bar-dropdown-container">
                            <label class="nav-label" for="nav-checkbox-1-2">
                                <span class="nav-dropdown-label-span">
                                    JIT Project
                                </span>
                            </label>
                            <div class="nav-dropdown-content">
                                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/about.html">About</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        
                            <input type="checkbox" class="nav-checkbox" id="nav-checkbox-2-2" checked="checked">
                        
                        <div class="nav-bar-dropdown-container">
                            <label class="nav-label" for="nav-checkbox-2-2">
                                <span class="nav-dropdown-label-span">
                                    Progress Timeline
                                </span>
                            </label>
                            <div class="nav-dropdown-content">
                                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/timeline.html">Timeline</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-1-3.html">Weeks 1 to 3</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-1.html">Journal 1</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-4-7.html">Weeks 4 to 7</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-2.html">Journal 2</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-8-13.html">Weeks 8 to 13</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/journal-3.html">Journal 3</a>
                    
                    </div>
                
                    <div class="nav-bar-item">
                    
                        <a class="nav-link" href="/jit-project/progress-timeline/week-14-15.html">Weeks 14 to 15</a>
                    
                    </div>
                
                            </div>
                        </div>
                    
                    </div>
                
                            </div>
                        </div>
                    
                    </div>
                
            </div>
        </div>
        <label class="nav-bar-side-label" for="nav-bar-side-button">
            <span class="nav-bar-side-label-span"></span>
        </label>
    </div>
    <div class="content-container">
        <div class="content">
            <div class="content-title"><header>Progress: Week 1</header></div><hr><div class="content-paragraph"><p>October 17, 2020 - October 23, 2020</p></div><div class="content-heading">Goals For This Week</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p>Find out how previous JIT's worked.</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Create a plan for how my JIT will work based on that.</p></div></li></ol><div class="content-heading">Mini-Journal For This Week</div><figure class="content-quote"><blockquote>LuaJIT with the JIT enabled is much faster than all of the other languages benchmarked, including Wren, because Mike Pall is a robot from the future.</blockquote><figcaption>&mdash; Bob Nystrom, <a href="https://wren.io/performance.html">Wren Benchmarks</a></figcaption></figure><div class="content-paragraph"><p>Most of my research on JIT's suggests that Bob here has expressed pure truth. LuaJIT is the gold-standard for JIT's.</p></div><div class="content-paragraph"><p>Google has it's own JIT, V8, for Javascript. This is the JIT that runs Javascript in Chrome Browsers (possibly morenow that Chromium also runs Edge). It has had millions of dollars invested in it by possibly the techiest tech company there is.Nevertheless, it still doesn't even compare to LuaJIT. <a href="http://lua-users.org/lists/lua-l/2010-03/msg00305.html">Benchmarks</a> indicate that even just the LuaJIT interpreter is faster than the V8 JIT. This suggests that the best model for how a JIT should work is Mike Pall's LuaJIT.</p></div><div class="content-paragraph"><p>
I should still look at other JIT's though, and how they work. By my research, there are two main methods.
</p></div><div class="content-paragraph"><p>
A Tracing JIT is one of them. Essentially, it follows the execution of the program for some amount of time, usually in a 
loop the JIT has noticed is iterated over a lot. After recording one full cycle of that "hot" loop, it compiles what was done
in that loop and replaces the body of that loop with the compiled version. Thus, code that is run a lot is compiled into machine code, 
which makes the code much faster. The targeted aspect of this makes it much more efficient in work down vs speed compared to the other
method of JIT'ing, a method JIT.
</p></div><div class="content-paragraph"><p>
A method JIT is the other way to write a JIT Compiler. Essentially, it just compiles a section of code at a time whenever it wants to and executes that
compiled code. The main difference is that it never actually checks what's executed and what isn't, like a tracing jit.
It just compiles all the code all the time. This makes them much simpler to write, and sometimes faster since they don't over-optimize.
<a href="https://news.ycombinator.com/item?id=16204373">This</a> recent discussion covers other aspects of method-jits that
make them more common nowadays. Nevertheless, LuaJIT, a tracing jit, is still better than nearly all method jits.
</p></div><div class="content-paragraph"><p>
In summary, a tracing JIT has better best-case performance but worse worst-case performance. A method JIT has more consistent but
worse performance.
</p></div><div class="content-paragraph"><p>
Looking at how PyPy has designed its tracing JIT, I've decided that such a complex means of writing a JIT is probably not for me.
Additionally, having to track exactly what instructions are run seems like a lot of overhead which could slow down the JIT. 
Therefore, I've decided to pursue a method-jit for now. I have time to review this decision later, since I don't start work on the 
actual JIT part of quite a while. 
</p></div><div class="content-paragraph"><p>
Essentially, my plan for my JIT is that it will run normally with an interpreter, but if it sees a function get called a lot, it'll compile and optimize
that function only. This makes it a method JIT, since it doesn't trace that function.
</p></div><div class="content-heading">Sources:</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://lua-users.org/lists/lua-l/2010-03/msg00305.html">http://lua-users.org/lists/lua-l/2010-03/msg00305.html</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://wren.io/performance.html">https://wren.io/performance.html</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://antocuni.eu/download/antocuni-phd-thesis.pdf">An overview of PyPy, tracing JITs, and meta-tracing JITs</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://news.ycombinator.com/item?id=16204373">https://news.ycombinator.com/item?id=16204373</a></p></div></li></ol><div class="content-title"><header>Progress: Week 2</header></div><hr><div class="content-paragraph"><p>October 24, 2020 - October 30, 2020</p></div><div class="content-heading">Goals For This Week</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p>Read up on x86 Assembly (the one used in my computer)</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Create a basic Assembler based on the reading</p></div></li></ol><div class="content-heading">Mini-Journal For This Week</div><div class="content-paragraph"><p>
The initial learning took a lot more effort than expected because no one on the internet can be bothered to make any 
x86 or x64 tutorials for Windows. Everything has to be for Linux, the superior operating system which 1.53% of systems use.
</p></div><div class="content-paragraph"><p>
Knowing that all these tutorials would be for Linux, I spent a week in Summer Break trying to get a working Linux install
on my laptop. After numerous attempts, I finally got Ubuntu 20 to work well. Having done so, I began following the tutorials
on how to write and compile assembly.
</p></div><div class="content-paragraph"><p>
Luckily for me, I already knew a lot about how to write assembly, because it is designed very similar to interpreter bytecode,
since that's what it is deep down. That made it easy for me to figure out how to write it. The hard part of generating it a form 
usable by the computer. After a lot of googling and following the sources listed at the bottom of this journal, I finally figure that out too
and have now built a working prototype assembler, with calling capabilities
</p></div><div class="content-heading">Sources:</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-instruction-set-reference-manual-325383.pdf">x64 Instruction Reference</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://pyokagan.name/blog/2019-09-20-x86encoding/">https://pyokagan.name/blog/2019-09-20-x86encoding/</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://eli.thegreenplace.net/2013/11/05/how-to-jit-an-introduction">https://eli.thegreenplace.net/2013/11/05/how-to-jit-an-introduction</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://ref.x86asm.net/geek64.html">http://ref.x86asm.net/geek64.html</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://wiki.osdev.org/X86-64_Instruction_Encoding">https://wiki.osdev.org/X86-64_Instruction_Encoding</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://stackoverflow.com/questions/15020621/what-is-between-esp-and-ebp">https://stackoverflow.com/questions/15020621/what-is-between-esp-and-ebp</a></p></div></li></ol><div class="content-title"><header>Progress: Week 3</header></div><hr><div class="content-paragraph"><p>October 31, 2020 - November 6, 2020</p></div><div class="content-heading">Goals For This Week</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p>Read up on IR designs</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Look into what my IR will need</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Design an IR to fulfill those needs</p></div></li></ol><div class="content-end"></div>
        </div>
    </div>
    <div class="right-content"></div>
</body>
</html>
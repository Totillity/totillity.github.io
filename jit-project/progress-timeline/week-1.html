<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Book</title>
    
        <link rel='stylesheet' href='../../style.css'>
    
</head>
<body>
    <div class="nav-bar">
        <div id="nav-title-container">
<!--            <div id="nav-title">Navigation</div>-->
            <img src="/Logo.svg" id="nav-img">
        </div>

        <div class="nav-list">
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/index.html">Contents</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    
                        <input type="checkbox" class="nav-checkbox" id="nav-checkbox-1-2" checked="checked">
                    
                    <div class="nav-bar-dropdown-container">
                        <label class="nav-label" for="nav-checkbox-1-2">
                            <span class="nav-dropdown-label-span">
                                JIT Project
                            </span>
                        </label>
                        <div class="nav-dropdown-content">
                            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/about.html">About</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    
                        <input type="checkbox" class="nav-checkbox" id="nav-checkbox-2-2" checked="checked">
                    
                    <div class="nav-bar-dropdown-container">
                        <label class="nav-label" for="nav-checkbox-2-2">
                            <span class="nav-dropdown-label-span">
                                Progress Timeline
                            </span>
                        </label>
                        <div class="nav-dropdown-content">
                            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/timeline.html">Timeline</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-1.html">Week 1</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-2.html">Week 2</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-3.html">Week 3</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/journal-1.html">Journal 1</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-4.html">Week 4</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-5.html">Week 5</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-6.html">Week 6</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-7.html">Week 7</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/journal-2.html">Journal 2</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-8.html">Week 8</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-9.html">Week 9</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-10.html">Week 10</a>
                
                </div>
            
                <div class="nav-bar-item">
                
                    <a class="nav-link" href="/jit-project/progress-timeline/week-11.html">Week 11</a>
                
                </div>
            
                        </div>
                    </div>
                
                </div>
            
                        </div>
                    </div>
                
                </div>
            
        </div>
    </div>
    <div class="content-container">
        <div class="content">
            <div class="content-title"><header>Progress: Week 1</header></div><hr><div class="content-paragraph"><p>October 17, 2020 - October 23, 2020</p></div><div class="content-heading">Goals For This Week</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p>Find out how previous JIT's worked.</p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p>Create a plan for how my JIT will work based on that.</p></div></li></ol><div class="content-heading">Mini-Journal For This Week</div><figure class="content-quote"><blockquote>LuaJIT with the JIT enabled is much faster than all of the other languages benchmarked, including Wren, because Mike Pall is a robot from the future.</blockquote><figcaption>&mdash; Bob Nystrom, <a href="https://wren.io/performance.html">Wren Benchmarks</a></figcaption></figure><div class="content-paragraph"><p>Most of my research on JIT's suggests that Bob here has expressed pure truth. LuaJIT is the gold-standard for JIT's.</p></div><div class="content-paragraph"><p>Google has it's own JIT, V8, for Javascript. This is the JIT that runs Javascript in Chrome Browsers (possibly morenow that Chromium also runs Edge). It has had millions of dollars invested in it by possibly the techiest tech company there is.Nevertheless, it still doesn't even compare to LuaJIT. <a href="http://lua-users.org/lists/lua-l/2010-03/msg00305.html">Benchmarks</a> indicate that even just the LuaJIT interpreter is faster than the V8 JIT. This suggests that the best model for how a JIT should work is Mike Pall's LuaJIT.</p></div><div class="content-paragraph"><p>
I should still look at other JIT's though, and how they work. By my research, there are two main methods.
</p></div><div class="content-paragraph"><p>
A Tracing JIT is one of them. Essentially, it follows the execution of the program for some amount of time, usually in a 
loop the JIT has noticed is iterated over a lot. After recording one full cycle of that "hot" loop, it compiles what was done
in that loop and replaces the body of that loop with the compiled version. Thus, code that is run a lot is compiled into machine code, 
which makes the code much faster. The targeted aspect of this makes it much more efficient in work down vs speed compared to the other
method of JIT'ing, a method JIT.
</p></div><div class="content-paragraph"><p>
A method JIT is the other way to write a JIT Compiler. Essentially, it just compiles a section of code at a time whenever it wants to and executes that
compiled code. The main difference is that it never actually checks what's executed and what isn't, like a tracing jit.
It just compiles all the code all the time. This makes them much simpler to write, and sometimes faster since they don't over-optimize.
<a href="https://news.ycombinator.com/item?id=16204373">This</a> recent discussion covers other aspects of method-jits that
make them more common nowadays. Nevertheless, LuaJIT, a tracing jit, is still better than nearly all method jits.
</p></div><div class="content-paragraph"><p>
In summary, a tracing JIT has better best-case performance but worse worst-case performance. A method JIT has more consistent but
worse performance.
</p></div><div class="content-paragraph"><p>
Looking at how PyPy has designed its tracing JIT, I've decided that such a complex means of writing a JIT is probably not for me.
Additionally, having to track exactly what instructions are run seems like a lot of overhead which could slow down the JIT. 
Therefore, I've decided to pursue a method-jit for now. I have time to review this decision later, since I don't start work on the 
actual JIT part of quite a while. 
</p></div><div class="content-paragraph"><p>
Essentially, my plan for my JIT is that it will run normally with an interpreter, but if it sees a function get called a lot, it'll compile and optimize
that function only. This makes it a method JIT, since it doesn't trace that function.
</p></div><div class="content-heading">Sources:</div><ol class="content-ordered-list"><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://lua-users.org/lists/lua-l/2010-03/msg00305.html">http://lua-users.org/lists/lua-l/2010-03/msg00305.html</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://wren.io/performance.html">https://wren.io/performance.html</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="http://antocuni.eu/download/antocuni-phd-thesis.pdf">An overview of PyPy, tracing JITs, and meta-tracing JITs</a></p></div></li><li class="content-ordered-list-item"><div class="content-paragraph"><p><a href="https://news.ycombinator.com/item?id=16204373">https://news.ycombinator.com/item?id=16204373</a></p></div></li></ol><div class="content-end"></div>
        </div>
    </div>
    <div class="right-content"></div>
</body>
</html>